
<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="https://p.trellocdn.com/power-up.min.css">
    <script src="https://p.trellocdn.com/power-up.min.js"></script>
  </head>
  <body>
    <iframe data-tally-src="https://tally.so/embed/n0VNqN?alignLeft=1&hideTitle=1&transparentBackground=1&dynamicHeight=1" loading="lazy" width="100%" height="648" frameborder="0" marginheight="0" marginwidth="0" title="Ticket Feedback Form"></iframe>
    <script>
      document.querySelectorAll("iframe[data-tally-src]").forEach( e => { e.dataset.tallySrc = e.dataset.tallySrc + '&feedbackCreater=1234567'} )
      
      const t = window.TrelloPowerUp.iframe();
      console.log(t.args[0].context.member, t.args[0].context.card);
      let trelloMember = t.args[0].context.member
      console.log(document.querySelectorAll("iframe[data-tally-src]"));
      
      var d=document,
      w="https://tally.so/widgets/embed.js",
      test=function(){
            window.Tally.openPopup('n0VNqN', {
              hiddenFields: {
                trelloId: t.args[0].context.card,
                feedbackCreater: trelloMember
              }
            })
      },
      v=function(){
            "undefined"!=typeof Tally?Tally.loadEmbeds():d.querySelectorAll("iframe[data-tally-src]:not([src])").forEach((function(e){
              e.src=e.dataset.tallySrc+'&trelloId='+t.args[0].context.card+'&feedbackCreater='+t.args[0].context.member;
              e.dataset.tallySrc=e.dataset.tallySrc+'&trelloId='+t.args[0].context.card+'&feedbackCreater='+t.args[0].context.member}))
      };
      if("undefined"!=typeof Tally)v();
      else if(d.querySelector('script[src="'+w+'"]')==null){
        var s=d.createElement("script");
        s.src=w,
        s.onload=v,
        s.onload=test,
        s.onerror=v,
        d.body.appendChild(s);
    }
    </script>
  </body>
</html>
